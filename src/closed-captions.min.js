"use strict";sardius.menu("closed-captions",function(a,e){var s,t,i,n=new sardius.libs.MenuMaker(a,{anOption:e});n.addClass("vjs-icon-captions");var c=navigator.userAgent,o=-1!==c.indexOf("Safari")&&-1===c.indexOf("Chrome"),r=o&&(-1!==c.indexOf("iPhone")||-1!==c.indexOf("iPod"));o=o&&r;var l=function(e){var t=s.options.labels,i=e.toLowerCase().replace(/[^a-z0-9]+/gi,"");return void 0!==t[i]&&(e=t[i]),e},d=n.newGroup({classes:"sp-menu",id:"sp-bitrate",title:"Closed Captions",minItems:1}),p=function(e){o||(i||((i=document.createElement("div")).className="sp-captions-display",i.innerHTML="",a.el_.appendChild(i)),t&&t.removeEventListener("cuechange",u,!0),e||!i?a.addRemoteTextTrack({kind:"captions",label:l(e.label),srclang:e.label.toLowerCase(),src:e.file,mode:"showing"},!0):i.innerHTML="")};function u(){if(!o&&(void 0!==i&&(i.innerHTML=""),0<this.activeCues_.length)){text=this.activeCues_[0].text,text=text.split(/\n/),a.textTrackDisplay.hide();var e=document.createElement("div");e.className="sp-captions-display-line",e.innerHTML="<div class='sp-captions-display-line-text'> "+text.join("<br />")+" </div>",i.appendChild(e)}}return a.on("settingsMenu-SourceHandler-change",function(e,t){s=t,function(){var e=[];if(s.captions){for(var t=0;t<s.captions.length;t++){var i=s.captions[t];if(o){var n={kind:"captions",label:l(i.label),srclang:i.label.toLowerCase(),src:i.file};a.addRemoteTextTrack(n,!0)}e.push({classes:"sp-bitrate-auto",label:l(i.label),isActive:!1,data:i,callback:function(e,t){if(t.isActive)return d.setActiveItem(),void p(!1);d.setActiveItem(t),p(e)}})}d.addItems(e)}}()}),a.textTracks().addEventListener("addtrack",function(e){t=e.track,setTimeout(function(){t.showing=!0},2e3),t.addEventListener("cuechange",u)}),n});