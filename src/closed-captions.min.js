"use strict";sardius.menu("closed-captions",function(e,t){var i=new sardius.libs.MenuMaker(e,{anOption:t});i.addClass("vjs-icon-captions");var n,a,s,c=navigator.userAgent,o=-1!==c.indexOf("Safari")&&-1===c.indexOf("Chrome"),r=o&&(-1!==c.indexOf("iPhone")||-1!==c.indexOf("iPod"));o=o&&r;var l=function(e){var t=n.options.labels,i=e.toLowerCase().replace(/[^a-z0-9]+/gi,"");return void 0!==t[i]&&(e=t[i]),e},d=i.newGroup({classes:"sp-menu",id:"sp-bitrate",title:"Closed Captions",minItems:1}),p=function(t){o||(s||((s=document.createElement("div")).className="sp-captions-display",s.innerHTML="",e.el_.appendChild(s)),a&&a.removeEventListener("cuechange",u,!0),t||!s?e.addRemoteTextTrack({kind:"captions",label:l(t.label),srclang:t.label.toLowerCase(),src:t.file,mode:"showing"},!0):s.innerHTML="")};e.on("settingsMenu-SourceHandler-change",function(t,i){n=i,function(){var t=[];if(n.captions){for(var i=0;i<n.captions.length;i++){var a=n.captions[i];if(o){var s={kind:"captions",label:l(a.label),srclang:a.label.toLowerCase(),src:a.file};e.addRemoteTextTrack(s,!0)}t.push({classes:"sp-bitrate-auto",label:l(a.label),isActive:!1,data:a,callback:function(e,t){if(t.isActive)return d.setActiveItem(),void p(!1);d.setActiveItem(t),p(e)}})}d.addItems(t)}}()});function u(){if(!o&&(void 0!==s&&(s.innerHTML=""),this.activeCues_.length>0)){text=this.activeCues_[0].text,text=text.split(/\n/),e.textTrackDisplay.hide();var t=document.createElement("div");t.className="sp-captions-display-line",t.innerHTML="<div class='sp-captions-display-line-text'> "+text.join("<br />")+" </div>",s.appendChild(t)}}return e.textTracks().addEventListener("addtrack",function(e){a=e.track,setTimeout(function(){a.showing=!0},2e3),a.addEventListener("cuechange",u)}),i});